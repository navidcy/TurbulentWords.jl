<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Two-dimensional turbulence · TurbulentWords.jl</title><meta name="title" content="Two-dimensional turbulence · TurbulentWords.jl"/><meta property="og:title" content="Two-dimensional turbulence · TurbulentWords.jl"/><meta property="twitter:title" content="Two-dimensional turbulence · TurbulentWords.jl"/><meta name="description" content="Documentation for TurbulentWords.jl."/><meta property="og:description" content="Documentation for TurbulentWords.jl."/><meta property="twitter:description" content="Documentation for TurbulentWords.jl."/><meta property="og:url" content="https://navidcy.github.io/TurbulentWords.jl/stable/literated/hello_turbulence/"/><meta property="twitter:url" content="https://navidcy.github.io/TurbulentWords.jl/stable/literated/hello_turbulence/"/><link rel="canonical" href="https://navidcy.github.io/TurbulentWords.jl/stable/literated/hello_turbulence/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TurbulentWords.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../hello_flow/">Hello flow</a></li><li class="is-active"><a class="tocitem" href>Two-dimensional turbulence</a></li><li><a class="tocitem" href="../hello_buoyancy/">Stratified turbulence</a></li></ul></li><li><span class="tocitem">Appendix</span><ul><li><a class="tocitem" href="../../appendix/library/">Library</a></li><li><a class="tocitem" href="../../appendix/function_index/">Function index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Two-dimensional turbulence</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Two-dimensional turbulence</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/navidcy/TurbulentWords.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/navidcy/TurbulentWords.jl/blob/main/examples/hello_turbulence.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="A-two-dimensional-turbulence-example"><a class="docs-heading-anchor" href="#A-two-dimensional-turbulence-example">A two-dimensional turbulence example</a><a id="A-two-dimensional-turbulence-example-1"></a><a class="docs-heading-anchor-permalink" href="#A-two-dimensional-turbulence-example" title="Permalink"></a></h1><pre><code class="language-julia hljs">using Oceananigans
using TurbulentWords
using CairoMakie</code></pre><p>We construct a simulation with a word and run it.</p><pre><code class="language-julia hljs">simulation = word_to_simulation(&quot;hello&quot;, pad_to_square=true)
simulation.stop_time = 15

model = simulation.model
u, v, w = model.velocities
outputs = (; ζ = ∂x(v) - ∂y(u))
filename = &quot;hello_turbulence&quot;
simulation.output_writers[:fields] = JLD2OutputWriter(model, outputs,
                                                      schedule = TimeInterval(0.2),
                                                      filename = filename * &quot;.jld2&quot;,
                                                      overwrite_existing = true)

run!(simulation)</code></pre><pre><code class="nohighlight hljs">[ Info: Initializing simulation...
[ Info: Iteration: 0, time: 0.0, wall time: 13.960 seconds, Δt: 0.011000000000000001
[ Info:     ... simulation initialization complete (6.740 seconds)
[ Info: Executing initial time step...
[ Info:     ... initial time step complete (4.053 seconds).
[ Info: Iteration: 10, time: 0.11549999999999999, wall time: 20.771 seconds, Δt: 0.013310000000000002
[ Info: Iteration: 20, time: 0.24392300000000006, wall time: 14.744 seconds, Δt: 0.016105100000000004
[ Info: Iteration: 30, time: 0.4, wall time: 14.780 seconds, Δt: 0.019487171000000008
[ Info: Iteration: 40, time: 0.6000000000000001, wall time: 14.752 seconds, Δt: 0.023579476910000015
[ Info: Iteration: 50, time: 0.8259374246010001, wall time: 14.819 seconds, Δt: 0.02853116706110002
[ Info: Iteration: 60, time: 1.09415285130163, wall time: 14.766 seconds, Δt: 0.03452271214393103
[ Info: Iteration: 70, time: 1.4, wall time: 14.787 seconds, Δt: 0.04177248169415655
[ Info: Iteration: 80, time: 1.7999999999999998, wall time: 14.791 seconds, Δt: 0.04578645511522571
[ Info: Iteration: 90, time: 2.2, wall time: 14.794 seconds, Δt: 0.046146204389822115
[ Info: Iteration: 100, time: 2.6000000000000005, wall time: 14.810 seconds, Δt: 0.046176839814799114
[ Info: Iteration: 110, time: 3.000000000000001, wall time: 14.765 seconds, Δt: 0.04619209571899535
[ Info: Iteration: 120, time: 3.4000000000000012, wall time: 14.769 seconds, Δt: 0.04627037455646546
[ Info: Iteration: 130, time: 3.8000000000000003, wall time: 14.790 seconds, Δt: 0.0464551652110448
[ Info: Iteration: 140, time: 4.199999999999999, wall time: 14.768 seconds, Δt: 0.04681736672235077
[ Info: Iteration: 150, time: 4.587902511294638, wall time: 14.852 seconds, Δt: 0.04722228250149452
[ Info: Iteration: 160, time: 4.989969381209889, wall time: 14.751 seconds, Δt: 0.04777085479202674
[ Info: Iteration: 170, time: 5.344218996362254, wall time: 14.836 seconds, Δt: 0.048286892363491214
[ Info: Iteration: 180, time: 5.745789091271541, wall time: 14.806 seconds, Δt: 0.048919214165054854
[ Info: Iteration: 190, time: 6.147845334936861, wall time: 14.809 seconds, Δt: 0.049659669403689
[ Info: Iteration: 200, time: 6.550062125514573, wall time: 14.752 seconds, Δt: 0.050320594334973115
[ Info: Iteration: 210, time: 7.000000000000001, wall time: 14.841 seconds, Δt: 0.05057170207648992
[ Info: Iteration: 220, time: 7.501107534206885, wall time: 14.819 seconds, Δt: 0.050732446847603085
[ Info: Iteration: 230, time: 8.000000000000002, wall time: 14.824 seconds, Δt: 0.05087266700658974
[ Info: Iteration: 240, time: 8.50136575072908, wall time: 14.850 seconds, Δt: 0.05065656173213945
[ Info: Iteration: 250, time: 8.999999999999998, wall time: 14.823 seconds, Δt: 0.05062448141069799
[ Info: Iteration: 260, time: 9.501106326365809, wall time: 14.784 seconds, Δt: 0.05060604743194755
[ Info: Iteration: 270, time: 9.999999999999995, wall time: 14.808 seconds, Δt: 0.05030055797148138
[ Info: Iteration: 280, time: 10.500272417013514, wall time: 14.831 seconds, Δt: 0.04975437144362997
[ Info: Iteration: 290, time: 10.898011869320454, wall time: 14.784 seconds, Δt: 0.04838288325713422
[ Info: Iteration: 300, time: 11.29582330817872, wall time: 14.808 seconds, Δt: 0.04739923686010353
[ Info: Iteration: 310, time: 11.694248379561655, wall time: 14.782 seconds, Δt: 0.04676452113021888
[ Info: Iteration: 320, time: 12.093224449320791, wall time: 14.810 seconds, Δt: 0.04646858184030977
[ Info: Iteration: 330, time: 12.446354959529167, wall time: 14.852 seconds, Δt: 0.04640442420277065
[ Info: Iteration: 340, time: 12.846476183824839, wall time: 14.826 seconds, Δt: 0.046550720724594694
[ Info: Iteration: 350, time: 13.246678821513525, wall time: 14.863 seconds, Δt: 0.0468577100902801
[ Info: Iteration: 360, time: 13.6470646711977, wall time: 14.817 seconds, Δt: 0.047276891663241845
[ Info: Iteration: 370, time: 14.047467586679257, wall time: 14.838 seconds, Δt: 0.047669263840336824
[ Info: Iteration: 380, time: 14.447628948777039, wall time: 14.848 seconds, Δt: 0.04759386210744332
[ Info: Iteration: 390, time: 14.847566447597675, wall time: 14.769 seconds, Δt: 0.04754744877254058
[ Info: Simulation is stopping after running for 9.869 minutes.
[ Info: Simulation time 15 seconds equals or exceeds stop time 15 seconds.
</code></pre><p>Now we load the saved output</p><pre><code class="language-julia hljs">ζt = FieldTimeSeries(filename * &quot;.jld2&quot;, &quot;ζ&quot;)
times = ζt.times</code></pre><pre><code class="nohighlight hljs">76-element Vector{Float64}:
  0.0
  0.20000000000000004
  0.4
  0.6000000000000001
  0.8
  1.0
  1.2
  1.4
  1.5999999999999999
  1.7999999999999998
  1.9999999999999998
  2.2
  2.4000000000000004
  2.6000000000000005
  2.8000000000000007
  3.000000000000001
  3.200000000000001
  3.4000000000000012
  3.600000000000002
  3.8000000000000003
  4.0
  4.2
  4.4
  4.6000000000000005
  4.800000000000001
  5.000000000000001
  5.200000000000001
  5.400000000000001
  5.600000000000001
  5.800000000000002
  6.000000000000002
  6.200000000000003
  6.4
  6.6000000000000005
  6.800000000000001
  7.000000000000001
  7.200000000000001
  7.400000000000001
  7.600000000000001
  7.800000000000002
  8.000000000000002
  8.200000000000001
  8.4
  8.6
  8.799999999999999
  8.999999999999998
  9.199999999999998
  9.399999999999997
  9.599999999999996
  9.799999999999995
  9.999999999999995
 10.199999999999994
 10.399999999999993
 10.599999999999993
 10.799999999999992
 10.999999999999991
 11.19999999999999
 11.39999999999999
 11.599999999999989
 11.799999999999988
 11.999999999999988
 12.199999999999987
 12.399999999999986
 12.599999999999985
 12.799999999999985
 12.999999999999984
 13.199999999999983
 13.399999999999983
 13.599999999999982
 13.799999999999981
 13.99999999999998
 14.19999999999998
 14.399999999999979
 14.599999999999978
 14.799999999999978
 14.999999999999977</code></pre><p>and make a movie</p><pre><code class="language-julia hljs">fig = Figure(size = (600, 600))
ax = Axis(fig[1, 1])
hidedecorations!(ax)
hidespines!(ax)

n = Observable(1)

ζₙ = @lift interior(ζt[$n], :, :, 1)

ζmax = 0.8
heatmap!(ax, ζₙ; colormap = :balance, colorrange = (-ζmax, ζmax))

stillframes = 20
framerate = 32
movingframes = length(times)

record(fig, filename * &quot;.mp4&quot;; framerate) do io
    [recordframe!(io) for _ = 1:stillframes]

    for nn in 1:movingframes
        n[] = nn
        recordframe!(io)
    end

    for nn in movingframes:-1:1
        n[] = nn
        recordframe!(io)
    end

    [recordframe!(io) for _ = 1:stillframes]
end</code></pre><pre><code class="nohighlight hljs">&quot;hello_turbulence.mp4&quot;</code></pre><p><video src="../hello_turbulence.mp4" controls="true" title><a href="../hello_turbulence.mp4"></a></video></p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../hello_flow/">« Hello flow</a><a class="docs-footer-nextpage" href="../hello_buoyancy/">Stratified turbulence »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Thursday 15 February 2024 07:56">Thursday 15 February 2024</span>. Using Julia version 1.10.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
